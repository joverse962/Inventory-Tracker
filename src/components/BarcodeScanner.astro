---
---
<div x-data="{ showScanner: false, scanResult: '' }">
  <!-- Barcode Scanner Button -->
  <button 
    @click="showScanner = true"
    class="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 transition flex items-center gap-2"
  >
    ðŸ“· Scan Barcode
  </button>

  <!-- Scanner Modal -->
  <div 
    x-show="showScanner" 
    @click.self="showScanner = false"
    class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
    style="display: none;"
  >
    <div class="bg-white p-6 rounded-lg shadow-2xl max-w-md w-full mx-4" @click.stop>
      <div class="flex justify-between items-start mb-4">
        <h2 class="text-xl font-bold">Scan Barcode</h2>
        <button @click="showScanner = false" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
      </div>
      
      <!-- Camera Preview -->
      <div class="bg-gray-200 rounded-lg mb-4 flex items-center justify-center" style="height: 300px;">
        <div id="scanner-container" class="w-full h-full">
          <p class="text-gray-500 text-center pt-32">ðŸ“· Camera preview would appear here</p>
        </div>
      </div>

      <!-- Manual Entry -->
      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700 mb-2">Or enter manually:</label>
        <input 
          type="text" 
          x-model="scanResult"
          placeholder="ITEM000001" 
          class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"
        />
      </div>

      <!-- Actions -->
      <div class="flex gap-2">
        <button 
          @click="scanResult && (window.location.href = '/?search=' + scanResult)"
          class="flex-1 bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 transition"
          :disabled="!scanResult"
          :class="!scanResult && 'opacity-50 cursor-not-allowed'"
        >
          Search Item
        </button>
        <button 
          @click="showScanner = false"
          class="bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300 transition"
        >
          Cancel
        </button>
      </div>

      <!-- Info -->
      <p class="text-xs text-gray-500 mt-4 text-center">
        ðŸ’¡ Tip: You can use a barcode scanner device or enter the code manually
      </p>
    </div>
  </div>

  <!-- Integration note for actual scanner library -->
  <script is:inline>
    // For actual barcode scanning, you would integrate a library like:
    // - QuaggaJS (for browser-based scanning)
    // - html5-qrcode
    // - ZXing
    // 
    // Example with html5-qrcode:
    // import { Html5Qrcode } from "html5-qrcode";
    // const html5QrCode = new Html5Qrcode("scanner-container");
    // html5QrCode.start({ facingMode: "environment" }, config, onScanSuccess, onScanError);
  </script>
</div>
